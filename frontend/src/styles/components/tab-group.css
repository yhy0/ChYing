/* 统一标签组组件 - 液态玻璃设计 */
/* 消除模块间重复，建立统一的标签页系统 */

/* === 1. 标签组容器 === */
.tab-group,
.decoder-tabs,
.intruder-tabs,
.repeater-tabs {
  display: flex;
  align-items: center;
  background: var(--glass-bg-tertiary);
  backdrop-filter: var(--glass-blur-light);
  -webkit-backdrop-filter: var(--glass-blur-light);
  border: 1px solid var(--glass-border-light);
  border-radius: var(--glass-radius-md) var(--glass-radius-md) 0 0;
  padding: 0.25rem;
  gap: 0.25rem;
  position: relative;
  overflow: hidden;
  min-height: 2.5rem;
}

/* 标签组光泽效果 */
.tab-group::before,
.decoder-tabs::before,
.intruder-tabs::before,
.repeater-tabs::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(255, 255, 255, 0.4) 25%, 
    rgba(255, 255, 255, 0.6) 50%, 
    rgba(255, 255, 255, 0.4) 75%, 
    transparent 100%);
  pointer-events: none;
  opacity: 0.8;
}

/* === 2. 标签项基础样式 === */
.tab-item,
.decoder-tab,
.intruder-tab,
.repeater-tab {
  display: flex;
  align-items: center;
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  background: var(--glass-bg-secondary);
  backdrop-filter: var(--glass-blur-subtle);
  -webkit-backdrop-filter: var(--glass-blur-subtle);
  border: 1px solid var(--glass-border-light);
  border-radius: var(--glass-radius-sm);
  cursor: pointer;
  transition: var(--glass-transition-normal);
  position: relative;
  overflow: hidden;
  user-select: none;
  gap: 0.375rem;
  min-width: 0;
  max-width: 200px;
}

/* 标签项光泽效果 */
.tab-item::before,
.decoder-tab::before,
.intruder-tab::before,
.repeater-tab::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  pointer-events: none;
  opacity: 0.7;
}

/* === 3. 标签项状态 === */

/* 悬停状态 */
.tab-item:hover,
.decoder-tab:hover,
.intruder-tab:hover,
.repeater-tab:hover {
  color: var(--color-text-primary);
  background: var(--glass-bg-primary);
  border-color: var(--glass-border);
  transform: translateY(-1px) scale(1.02);
  box-shadow: var(--glass-shadow-light);
}

/* 活动状态 */
.tab-item.active,
.decoder-tab.active,
.intruder-tab.active,
.repeater-tab.active {
  color: var(--color-text-primary);
  background: var(--glass-bg-card);
  backdrop-filter: var(--glass-blur-medium);
  -webkit-backdrop-filter: var(--glass-blur-medium);
  border-color: var(--glass-border-strong);
  box-shadow:
    var(--glass-shadow-medium),
    inset 0 0 10px rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
  z-index: 2;
  position: relative;
}

/* 液态感活动指示器 */
.tab-item.active::after,
.decoder-tab.active::after,
.intruder-tab.active::after,
.repeater-tab.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 10%;
  right: 10%;
  height: 3px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(99, 102, 241, 0.8) 20%,
    rgba(99, 102, 241, 1) 50%,
    rgba(99, 102, 241, 0.8) 80%,
    transparent 100%);
  border-radius: 2px 2px 0 0;
  box-shadow:
    0 0 8px rgba(99, 102, 241, 0.5),
    0 0 16px rgba(99, 102, 241, 0.3);
  z-index: 3;
}

/* 活动标签的增强光泽 */
.tab-item.active::before,
.decoder-tab.active::before,
.intruder-tab.active::before,
.repeater-tab.active::before {
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(255, 255, 255, 0.5) 25%, 
    rgba(255, 255, 255, 0.7) 50%, 
    rgba(255, 255, 255, 0.5) 75%, 
    transparent 100%);
  opacity: 1;
}

/* === 4. 标签内容 === */
.tab-title,
.tab-item .title,
.decoder-tab .title,
.intruder-tab .title,
.repeater-tab .title {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* === 5. 标签操作按钮 === */
.tab-close,
.tab-item .close-btn,
.decoder-tab .close-btn,
.intruder-tab .close-btn,
.repeater-tab .close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1rem;
  height: 1rem;
  border-radius: var(--glass-radius-xs);
  background: transparent;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  transition: var(--glass-transition-fast);
  opacity: 0.7;
}

.tab-close:hover,
.tab-item .close-btn:hover,
.decoder-tab .close-btn:hover,
.intruder-tab .close-btn:hover,
.repeater-tab .close-btn:hover {
  background: var(--glass-bg-tertiary);
  color: var(--color-danger);
  opacity: 1;
  transform: scale(1.1);
}

/* === 6. 新建标签按钮 === */
.tab-add,
.add-tab-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  background: var(--glass-bg-secondary);
  backdrop-filter: var(--glass-blur-subtle);
  -webkit-backdrop-filter: var(--glass-blur-subtle);
  border: 1px solid var(--glass-border-light);
  border-radius: var(--glass-radius-sm);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: var(--glass-transition-normal);
  margin-left: 0.25rem;
}

.tab-add:hover,
.add-tab-btn:hover {
  background: var(--glass-bg-primary);
  border-color: var(--glass-border);
  color: var(--color-text-primary);
  transform: scale(1.05);
  box-shadow: var(--glass-shadow-subtle);
}

/* === 7. 拖拽状态 === */
.tab-item.dragging,
.decoder-tab.dragging,
.intruder-tab.dragging,
.repeater-tab.dragging {
  opacity: 0.5;
  transform: rotate(5deg) scale(0.95);
  z-index: 1000;
  box-shadow: var(--glass-shadow-strong);
}

/* 拖拽目标指示器 */
.tab-drop-indicator {
  width: 2px;
  height: 100%;
  background: var(--color-primary);
  border-radius: 1px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.tab-drop-indicator.active {
  opacity: 1;
  box-shadow: 0 0 8px var(--color-primary);
}

/* === 8. 响应式设计 === */
@media (max-width: 768px) {
  .tab-group,
  .decoder-tabs,
  .intruder-tabs,
  .repeater-tabs {
    padding: 0.125rem;
    gap: 0.125rem;
  }
  
  .tab-item,
  .decoder-tab,
  .intruder-tab,
  .repeater-tab {
    padding: 0.25rem 0.5rem;
    font-size: 0.7rem;
    max-width: 120px;
  }
}

/* === 9. 深色模式优化 === */
.dark .tab-group::before,
.dark .decoder-tabs::before,
.dark .intruder-tabs::before,
.dark .repeater-tabs::before {
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(255, 255, 255, 0.1) 25%, 
    rgba(255, 255, 255, 0.2) 50%, 
    rgba(255, 255, 255, 0.1) 75%, 
    transparent 100%);
}

.dark .tab-item::before,
.dark .decoder-tab::before,
.dark .intruder-tab::before,
.dark .repeater-tab::before {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
}
